{"ast":null,"code":"import React,{useState,useEffect}from'react';import Layout from'../../components/common/Layout';import{nurseAPI}from'../../services/api';import{FiAlertTriangle,FiClock,FiCheckCircle}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NurseCriticalEvents=()=>{const[events,setEvents]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchCriticalEvents();},[]);const fetchCriticalEvents=async()=>{try{const response=await nurseAPI.getCriticalEvents();setEvents(response.data);}catch(error){console.error('Failed to fetch critical events:',error);}finally{setLoading(false);}};const formatTime=date=>{const now=new Date();const diff=now-new Date(date);const minutes=Math.floor(diff/60000);if(minutes<60)return\"\".concat(minutes,\" min ago\");const hours=Math.floor(diff/3600000);if(hours<24)return\"\".concat(hours,\" hours ago\");return new Date(date).toLocaleDateString();};const handleRespond=eventId=>{console.log('Responding to event:',eventId);};return/*#__PURE__*/_jsxs(Layout,{appName:\"NurseHub\",role:\"nurse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Priority Cases\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Critical alerts requiring immediate attention\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading critical events...\"}):events.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(FiCheckCircle,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"All Clear\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No critical events at the moment\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"alert-list\",children:events.map((event,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"alert-card priority\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-badge\",children:/*#__PURE__*/_jsx(FiAlertTriangle,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-patient\",children:[/*#__PURE__*/_jsx(\"strong\",{children:event.patientName||\"Patient \".concat(index+1)}),/*#__PURE__*/_jsxs(\"span\",{className:\"room-badge\",children:[\"Room \",event.room||\"\".concat(300+index,\"A\")]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"alert-reason\",children:event.reason||event.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"alert-time\",children:[/*#__PURE__*/_jsx(FiClock,{}),\" \",formatTime(event.createdAt)]}),/*#__PURE__*/_jsx(\"span\",{className:\"alert-type\",children:event.type||'Vital Alert'})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"respond-btn\",onClick:()=>handleRespond(event._id),children:\"Respond\"})]},event._id||index))})})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .alert-card.priority {\\n          display: flex;\\n          align-items: flex-start;\\n          gap: 1rem;\\n          padding: 1.25rem;\\n          border: 1px solid var(--accent-red);\\n          border-left: 4px solid var(--accent-red);\\n          border-radius: var(--radius-md);\\n          background: rgba(239, 68, 68, 0.02);\\n          margin-bottom: 1rem;\\n        }\\n        .alert-badge {\\n          width: 40px;\\n          height: 40px;\\n          background: rgba(239, 68, 68, 0.1);\\n          border-radius: var(--radius-full);\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          color: var(--accent-red);\\n          font-size: 1.25rem;\\n          flex-shrink: 0;\\n        }\\n        .alert-info {\\n          flex: 1;\\n        }\\n        .alert-patient {\\n          display: flex;\\n          align-items: center;\\n          gap: 0.75rem;\\n          margin-bottom: 0.5rem;\\n        }\\n        .alert-patient strong {\\n          font-size: 1rem;\\n        }\\n        .alert-reason {\\n          color: var(--text-secondary);\\n          font-size: 0.9rem;\\n          margin-bottom: 0.5rem;\\n        }\\n        .alert-meta {\\n          display: flex;\\n          align-items: center;\\n          gap: 1rem;\\n        }\\n        .alert-time {\\n          display: flex;\\n          align-items: center;\\n          gap: 0.25rem;\\n          font-size: 0.75rem;\\n          color: var(--text-muted);\\n        }\\n        .alert-type {\\n          font-size: 0.75rem;\\n          padding: 0.2rem 0.5rem;\\n          background: rgba(239, 68, 68, 0.1);\\n          color: var(--accent-red);\\n          border-radius: var(--radius-sm);\\n        }\\n        .empty-state {\\n          text-align: center;\\n          padding: 3rem;\\n        }\\n        .empty-icon {\\n          font-size: 3rem;\\n          color: var(--accent-green);\\n          margin-bottom: 1rem;\\n        }\\n        .empty-state h3 {\\n          font-size: 1.25rem;\\n          margin-bottom: 0.5rem;\\n        }\\n        .empty-state p {\\n          color: var(--text-secondary);\\n        }\\n      \"})]});};export default NurseCriticalEvents;","map":{"version":3,"names":["React","useState","useEffect","Layout","nurseAPI","FiAlertTriangle","FiClock","FiCheckCircle","jsx","_jsx","jsxs","_jsxs","NurseCriticalEvents","events","setEvents","loading","setLoading","fetchCriticalEvents","response","getCriticalEvents","data","error","console","formatTime","date","now","Date","diff","minutes","Math","floor","concat","hours","toLocaleDateString","handleRespond","eventId","log","appName","role","children","className","length","map","event","index","patientName","room","reason","message","createdAt","type","onClick","_id"],"sources":["E:/ECU-Materials/Senior - 2/Graduation Project/semester 2 isa/software reham- rahma/v1 soft app/EXIR/frontend/src/pages/nurse/NurseCriticalEvents.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../../components/common/Layout';\r\nimport { nurseAPI } from '../../services/api';\r\nimport { FiAlertTriangle, FiClock, FiCheckCircle } from 'react-icons/fi';\r\n\r\nconst NurseCriticalEvents = () => {\r\n  const [events, setEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchCriticalEvents();\r\n  }, []);\r\n\r\n  const fetchCriticalEvents = async () => {\r\n    try {\r\n      const response = await nurseAPI.getCriticalEvents();\r\n      setEvents(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch critical events:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    const now = new Date();\r\n    const diff = now - new Date(date);\r\n    const minutes = Math.floor(diff / 60000);\r\n    if (minutes < 60) return `${minutes} min ago`;\r\n    const hours = Math.floor(diff / 3600000);\r\n    if (hours < 24) return `${hours} hours ago`;\r\n    return new Date(date).toLocaleDateString();\r\n  };\r\n\r\n  const handleRespond = (eventId) => {\r\n    console.log('Responding to event:', eventId);\r\n  };\r\n\r\n  return (\r\n    <Layout appName=\"NurseHub\" role=\"nurse\">\r\n      <div className=\"page-header\">\r\n        <h1>Priority Cases</h1>\r\n        <p>Critical alerts requiring immediate attention</p>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          {loading ? (\r\n            <p>Loading critical events...</p>\r\n          ) : events.length === 0 ? (\r\n            <div className=\"empty-state\">\r\n              <FiCheckCircle className=\"empty-icon\" />\r\n              <h3>All Clear</h3>\r\n              <p>No critical events at the moment</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"alert-list\">\r\n              {events.map((event, index) => (\r\n                <div key={event._id || index} className=\"alert-card priority\">\r\n                  <div className=\"alert-badge\">\r\n                    <FiAlertTriangle />\r\n                  </div>\r\n                  <div className=\"alert-info\">\r\n                    <div className=\"alert-patient\">\r\n                      <strong>{event.patientName || `Patient ${index + 1}`}</strong>\r\n                      <span className=\"room-badge\">\r\n                        Room {event.room || `${300 + index}A`}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"alert-reason\">{event.reason || event.message}</p>\r\n                    <div className=\"alert-meta\">\r\n                      <span className=\"alert-time\">\r\n                        <FiClock /> {formatTime(event.createdAt)}\r\n                      </span>\r\n                      <span className=\"alert-type\">{event.type || 'Vital Alert'}</span>\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    className=\"respond-btn\"\r\n                    onClick={() => handleRespond(event._id)}\r\n                  >\r\n                    Respond\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .alert-card.priority {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 1rem;\r\n          padding: 1.25rem;\r\n          border: 1px solid var(--accent-red);\r\n          border-left: 4px solid var(--accent-red);\r\n          border-radius: var(--radius-md);\r\n          background: rgba(239, 68, 68, 0.02);\r\n          margin-bottom: 1rem;\r\n        }\r\n        .alert-badge {\r\n          width: 40px;\r\n          height: 40px;\r\n          background: rgba(239, 68, 68, 0.1);\r\n          border-radius: var(--radius-full);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: var(--accent-red);\r\n          font-size: 1.25rem;\r\n          flex-shrink: 0;\r\n        }\r\n        .alert-info {\r\n          flex: 1;\r\n        }\r\n        .alert-patient {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 0.75rem;\r\n          margin-bottom: 0.5rem;\r\n        }\r\n        .alert-patient strong {\r\n          font-size: 1rem;\r\n        }\r\n        .alert-reason {\r\n          color: var(--text-secondary);\r\n          font-size: 0.9rem;\r\n          margin-bottom: 0.5rem;\r\n        }\r\n        .alert-meta {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 1rem;\r\n        }\r\n        .alert-time {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 0.25rem;\r\n          font-size: 0.75rem;\r\n          color: var(--text-muted);\r\n        }\r\n        .alert-type {\r\n          font-size: 0.75rem;\r\n          padding: 0.2rem 0.5rem;\r\n          background: rgba(239, 68, 68, 0.1);\r\n          color: var(--accent-red);\r\n          border-radius: var(--radius-sm);\r\n        }\r\n        .empty-state {\r\n          text-align: center;\r\n          padding: 3rem;\r\n        }\r\n        .empty-icon {\r\n          font-size: 3rem;\r\n          color: var(--accent-green);\r\n          margin-bottom: 1rem;\r\n        }\r\n        .empty-state h3 {\r\n          font-size: 1.25rem;\r\n          margin-bottom: 0.5rem;\r\n        }\r\n        .empty-state p {\r\n          color: var(--text-secondary);\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default NurseCriticalEvents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}