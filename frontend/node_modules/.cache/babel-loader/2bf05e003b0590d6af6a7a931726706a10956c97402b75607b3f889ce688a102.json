{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FiBell,FiAlertCircle,FiInfo,FiCheckCircle}from'react-icons/fi';import{notificationAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationPanel=_ref=>{let{limit=5}=_ref;const[notifications,setNotifications]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchNotifications();},[]);const fetchNotifications=async()=>{try{const response=await notificationAPI.getNotifications();setNotifications(response.data.slice(0,limit));}catch(error){console.error('Failed to fetch notifications:',error);}finally{setLoading(false);}};const getIcon=type=>{switch(type){case'critical':return/*#__PURE__*/_jsx(FiAlertCircle,{className:\"notification-icon critical\"});case'success':return/*#__PURE__*/_jsx(FiCheckCircle,{className:\"notification-icon success\"});default:return/*#__PURE__*/_jsx(FiInfo,{className:\"notification-icon info\"});}};const formatTime=date=>{const now=new Date();const diff=now-new Date(date);const minutes=Math.floor(diff/60000);const hours=Math.floor(diff/3600000);if(minutes<60)return\"\".concat(minutes,\" min ago\");if(hours<24)return\"\".concat(hours,\" hours ago\");return new Date(date).toLocaleDateString();};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"notification-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsx(FiBell,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Notifications\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"panel-loading\",children:\"Loading...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"notification-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(FiBell,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Notifications\"})]}),notifications.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"notification-count\",children:notifications.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notification-list\",children:notifications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-notifications\",children:\"No new notifications\"}):notifications.map(notification=>/*#__PURE__*/_jsxs(\"div\",{className:\"notification-item \".concat(notification.type,\" \").concat(notification.read?'read':''),children:[getIcon(notification.type),/*#__PURE__*/_jsxs(\"div\",{className:\"notification-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"notification-message\",children:notification.message}),/*#__PURE__*/_jsx(\"span\",{className:\"notification-time\",children:formatTime(notification.createdAt)})]})]},notification._id))}),/*#__PURE__*/_jsx(\"button\",{className:\"view-all-btn\",children:\"View All Notifications\"})]});};export default NotificationPanel;","map":{"version":3,"names":["React","useState","useEffect","FiBell","FiAlertCircle","FiInfo","FiCheckCircle","notificationAPI","jsx","_jsx","jsxs","_jsxs","NotificationPanel","_ref","limit","notifications","setNotifications","loading","setLoading","fetchNotifications","response","getNotifications","data","slice","error","console","getIcon","type","className","formatTime","date","now","Date","diff","minutes","Math","floor","hours","concat","toLocaleDateString","children","length","map","notification","read","message","createdAt","_id"],"sources":["E:/ECU-Materials/Senior - 2/Graduation Project/semester 2 isa/software reham- rahma/v1 soft app/EXIR/frontend/src/components/common/NotificationPanel.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FiBell, FiAlertCircle, FiInfo, FiCheckCircle } from 'react-icons/fi';\r\nimport { notificationAPI } from '../../services/api';\r\n\r\nconst NotificationPanel = ({ limit = 5 }) => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchNotifications();\r\n  }, []);\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      const response = await notificationAPI.getNotifications();\r\n      setNotifications(response.data.slice(0, limit));\r\n    } catch (error) {\r\n      console.error('Failed to fetch notifications:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getIcon = (type) => {\r\n    switch (type) {\r\n      case 'critical':\r\n        return <FiAlertCircle className=\"notification-icon critical\" />;\r\n      case 'success':\r\n        return <FiCheckCircle className=\"notification-icon success\" />;\r\n      default:\r\n        return <FiInfo className=\"notification-icon info\" />;\r\n    }\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    const now = new Date();\r\n    const diff = now - new Date(date);\r\n    const minutes = Math.floor(diff / 60000);\r\n    const hours = Math.floor(diff / 3600000);\r\n\r\n    if (minutes < 60) return `${minutes} min ago`;\r\n    if (hours < 24) return `${hours} hours ago`;\r\n    return new Date(date).toLocaleDateString();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"notification-panel\">\r\n        <div className=\"panel-header\">\r\n          <FiBell />\r\n          <span>Notifications</span>\r\n        </div>\r\n        <div className=\"panel-loading\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"notification-panel\">\r\n      <div className=\"panel-header\">\r\n        <div className=\"header-left\">\r\n          <FiBell />\r\n          <span>Notifications</span>\r\n        </div>\r\n        {notifications.length > 0 && (\r\n          <span className=\"notification-count\">{notifications.length}</span>\r\n        )}\r\n      </div>\r\n      <div className=\"notification-list\">\r\n        {notifications.length === 0 ? (\r\n          <p className=\"no-notifications\">No new notifications</p>\r\n        ) : (\r\n          notifications.map((notification) => (\r\n            <div\r\n              key={notification._id}\r\n              className={`notification-item ${notification.type} ${notification.read ? 'read' : ''}`}\r\n            >\r\n              {getIcon(notification.type)}\r\n              <div className=\"notification-content\">\r\n                <p className=\"notification-message\">{notification.message}</p>\r\n                <span className=\"notification-time\">{formatTime(notification.createdAt)}</span>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n      <button className=\"view-all-btn\">View All Notifications</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}