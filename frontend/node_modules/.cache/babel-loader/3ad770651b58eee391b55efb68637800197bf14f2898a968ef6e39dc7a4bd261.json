{"ast":null,"code":"import React,{useState,useEffect}from'react';import Layout from'../../components/common/Layout';import StatCard from'../../components/common/StatCard';import NotificationPanel from'../../components/common/NotificationPanel';import{useAuth}from'../../context/AuthContext';import{nurseAPI}from'../../services/api';import{FiUsers,FiAlertTriangle,FiClipboard,FiCalendar,FiClock,FiArrowRight}from'react-icons/fi';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NurseDashboard=()=>{const{user}=useAuth();const[stats,setStats]=useState({totalPatients:0,urgentCases:0,tasksToday:0,appointments:0});const[criticalEvents,setCriticalEvents]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const[patientsRes,criticalRes]=await Promise.all([nurseAPI.getAssignedPatients(),nurseAPI.getCriticalEvents()]);const patients=patientsRes.data;const critical=criticalRes.data;setStats({totalPatients:patients.length,urgentCases:critical.length,tasksToday:12,appointments:8});setCriticalEvents(critical.slice(0,3));}catch(error){console.error('Failed to fetch dashboard data:',error);}finally{setLoading(false);}};const formatTime=date=>{const now=new Date();const diff=now-new Date(date);const minutes=Math.floor(diff/60000);if(minutes<60)return\"\".concat(minutes,\" min ago\");const hours=Math.floor(diff/3600000);return\"\".concat(hours,\" hours ago\");};return/*#__PURE__*/_jsxs(Layout,{appName:\"NurseHub\",role:\"nurse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard Overview\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.fullName)||'Nurse',\"! Here's your shift summary.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Patients\",value:stats.totalPatients,icon:FiUsers,color:\"blue\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Urgent Cases\",value:stats.urgentCases,icon:FiAlertTriangle,color:\"red\",trend:stats.urgentCases>0?'critical':null}),/*#__PURE__*/_jsx(StatCard,{title:\"Tasks Today\",value:stats.tasksToday,icon:FiClipboard,color:\"green\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Appointments\",value:stats.appointments,icon:FiCalendar,color:\"orange\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(FiAlertTriangle,{}),\"Urgent Cases / Priority Alerts\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/nurse/critical\",className:\"view-all\",children:[\"View All \",/*#__PURE__*/_jsx(FiArrowRight,{})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):criticalEvents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-notifications\",children:\"No urgent cases at the moment\"}):/*#__PURE__*/_jsx(\"div\",{className:\"alert-list\",children:criticalEvents.map((event,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"alert-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-patient\",children:[event.patientName||\"Patient \".concat(index+1),/*#__PURE__*/_jsxs(\"span\",{className:\"room-badge \".concat(index%2===0?'':'orange'),children:[\"Room \",event.room||\"\".concat(300+index,\"A\")]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"alert-reason\",children:event.reason||event.message}),/*#__PURE__*/_jsxs(\"span\",{className:\"alert-time\",children:[/*#__PURE__*/_jsx(FiClock,{}),\" \",formatTime(event.createdAt)]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"respond-btn\",children:\"Respond\"})]},event._id||index))})})]}),/*#__PURE__*/_jsx(NotificationPanel,{limit:4})]})]});};export default NurseDashboard;","map":{"version":3,"names":["React","useState","useEffect","Layout","StatCard","NotificationPanel","useAuth","nurseAPI","FiUsers","FiAlertTriangle","FiClipboard","FiCalendar","FiClock","FiArrowRight","Link","jsx","_jsx","jsxs","_jsxs","NurseDashboard","user","stats","setStats","totalPatients","urgentCases","tasksToday","appointments","criticalEvents","setCriticalEvents","loading","setLoading","fetchDashboardData","patientsRes","criticalRes","Promise","all","getAssignedPatients","getCriticalEvents","patients","data","critical","length","slice","error","console","formatTime","date","now","Date","diff","minutes","Math","floor","concat","hours","appName","role","children","className","fullName","title","value","icon","color","trend","to","map","event","index","patientName","room","reason","message","createdAt","_id","limit"],"sources":["E:/ECU-Materials/Senior - 2/Graduation Project/semester 2 isa/software reham- rahma/v1 soft app/EXIR/frontend/src/pages/nurse/NurseDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../../components/common/Layout';\r\nimport StatCard from '../../components/common/StatCard';\r\nimport NotificationPanel from '../../components/common/NotificationPanel';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { nurseAPI } from '../../services/api';\r\nimport { FiUsers, FiAlertTriangle, FiClipboard, FiCalendar, FiClock, FiArrowRight } from 'react-icons/fi';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst NurseDashboard = () => {\r\n  const { user } = useAuth();\r\n  const [stats, setStats] = useState({\r\n    totalPatients: 0,\r\n    urgentCases: 0,\r\n    tasksToday: 0,\r\n    appointments: 0\r\n  });\r\n  const [criticalEvents, setCriticalEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const [patientsRes, criticalRes] = await Promise.all([\r\n        nurseAPI.getAssignedPatients(),\r\n        nurseAPI.getCriticalEvents()\r\n      ]);\r\n\r\n      const patients = patientsRes.data;\r\n      const critical = criticalRes.data;\r\n\r\n      setStats({\r\n        totalPatients: patients.length,\r\n        urgentCases: critical.length,\r\n        tasksToday: 12,\r\n        appointments: 8\r\n      });\r\n\r\n      setCriticalEvents(critical.slice(0, 3));\r\n    } catch (error) {\r\n      console.error('Failed to fetch dashboard data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatTime = (date) => {\r\n    const now = new Date();\r\n    const diff = now - new Date(date);\r\n    const minutes = Math.floor(diff / 60000);\r\n    if (minutes < 60) return `${minutes} min ago`;\r\n    const hours = Math.floor(diff / 3600000);\r\n    return `${hours} hours ago`;\r\n  };\r\n\r\n  return (\r\n    <Layout appName=\"NurseHub\" role=\"nurse\">\r\n      <div className=\"page-header\">\r\n        <h1>Dashboard Overview</h1>\r\n        <p>Welcome back, {user?.fullName || 'Nurse'}! Here's your shift summary.</p>\r\n      </div>\r\n\r\n      <div className=\"stats-grid\">\r\n        <StatCard\r\n          title=\"Total Patients\"\r\n          value={stats.totalPatients}\r\n          icon={FiUsers}\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          title=\"Urgent Cases\"\r\n          value={stats.urgentCases}\r\n          icon={FiAlertTriangle}\r\n          color=\"red\"\r\n          trend={stats.urgentCases > 0 ? 'critical' : null}\r\n        />\r\n        <StatCard\r\n          title=\"Tasks Today\"\r\n          value={stats.tasksToday}\r\n          icon={FiClipboard}\r\n          color=\"green\"\r\n        />\r\n        <StatCard\r\n          title=\"Appointments\"\r\n          value={stats.appointments}\r\n          icon={FiCalendar}\r\n          color=\"orange\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"dashboard-grid\">\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h2>\r\n              <FiAlertTriangle />\r\n              Urgent Cases / Priority Alerts\r\n            </h2>\r\n            <Link to=\"/nurse/critical\" className=\"view-all\">\r\n              View All <FiArrowRight />\r\n            </Link>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {loading ? (\r\n              <p>Loading...</p>\r\n            ) : criticalEvents.length === 0 ? (\r\n              <p className=\"no-notifications\">No urgent cases at the moment</p>\r\n            ) : (\r\n              <div className=\"alert-list\">\r\n                {criticalEvents.map((event, index) => (\r\n                  <div key={event._id || index} className=\"alert-card\">\r\n                    <div className=\"alert-info\">\r\n                      <div className=\"alert-patient\">\r\n                        {event.patientName || `Patient ${index + 1}`}\r\n                        <span className={`room-badge ${index % 2 === 0 ? '' : 'orange'}`}>\r\n                          Room {event.room || `${300 + index}A`}\r\n                        </span>\r\n                      </div>\r\n                      <span className=\"alert-reason\">{event.reason || event.message}</span>\r\n                      <span className=\"alert-time\">\r\n                        <FiClock /> {formatTime(event.createdAt)}\r\n                      </span>\r\n                    </div>\r\n                    <button className=\"respond-btn\">Respond</button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <NotificationPanel limit={4} />\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default NurseDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}