{"ast":null,"code":"import React,{useState,useEffect}from'react';import Layout from'../../components/common/Layout';import{patientAPI}from'../../services/api';import{FiFileText,FiCalendar,FiUser,FiChevronDown,FiChevronUp}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PatientHistory=()=>{const[history,setHistory]=useState([]);const[loading,setLoading]=useState(true);const[expandedId,setExpandedId]=useState(null);useEffect(()=>{fetchHistory();},[]);const fetchHistory=async()=>{try{const response=await patientAPI.getMedicalHistory();setHistory(response.data);}catch(error){console.error('Failed to fetch history:',error);}finally{setLoading(false);}};const formatDate=date=>{return new Date(date).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});};const toggleExpand=id=>{setExpandedId(expandedId===id?null:id);};return/*#__PURE__*/_jsxs(Layout,{appName:\"Patient View\",role:\"patient\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Medical History\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View your complete medical history across all visits\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading medical history...\"}):history.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(FiFileText,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No Medical History\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your medical history will appear here after your first visit\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:history.map(record=>{var _record$medications;return/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-header\",onClick:()=>toggleExpand(record._id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-date\",children:[/*#__PURE__*/_jsx(FiCalendar,{}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(record.visitDate)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-summary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"diagnosis\",children:record.diagnosis||'General Checkup'}),/*#__PURE__*/_jsxs(\"span\",{className:\"doctor\",children:[/*#__PURE__*/_jsx(FiUser,{}),\" \",record.doctorName||'Dr. Unknown']})]}),expandedId===record._id?/*#__PURE__*/_jsx(FiChevronUp,{}):/*#__PURE__*/_jsx(FiChevronDown,{})]}),expandedId===record._id&&/*#__PURE__*/_jsxs(\"div\",{className:\"history-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Diagnosis\"}),/*#__PURE__*/_jsx(\"p\",{children:record.diagnosis||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Treatment Plan\"}),/*#__PURE__*/_jsx(\"p\",{children:record.treatmentPlan||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Prescribed Medications\"}),/*#__PURE__*/_jsx(\"ul\",{children:((_record$medications=record.medications)===null||_record$medications===void 0?void 0:_record$medications.length)>0?record.medications.map((med,i)=>/*#__PURE__*/_jsx(\"li\",{children:med},i)):/*#__PURE__*/_jsx(\"li\",{children:\"No medications prescribed\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"p\",{children:record.notes||'No additional notes'})]})]})]},record._id);})})})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .history-list {\\n          display: flex;\\n          flex-direction: column;\\n          gap: 1rem;\\n        }\\n        .history-item {\\n          border: 1px solid var(--border-color);\\n          border-radius: var(--radius-lg);\\n          overflow: hidden;\\n        }\\n        .history-header {\\n          display: flex;\\n          align-items: center;\\n          padding: 1rem 1.25rem;\\n          cursor: pointer;\\n          transition: background 0.2s;\\n        }\\n        .history-header:hover {\\n          background: var(--bg-light);\\n        }\\n        .history-date {\\n          display: flex;\\n          align-items: center;\\n          gap: 0.5rem;\\n          min-width: 180px;\\n          color: var(--accent-blue);\\n          font-weight: 500;\\n        }\\n        .history-summary {\\n          flex: 1;\\n          display: flex;\\n          flex-direction: column;\\n          gap: 0.25rem;\\n        }\\n        .diagnosis {\\n          font-weight: 500;\\n        }\\n        .doctor {\\n          display: flex;\\n          align-items: center;\\n          gap: 0.375rem;\\n          font-size: 0.85rem;\\n          color: var(--text-secondary);\\n        }\\n        .history-details {\\n          padding: 1.25rem;\\n          background: var(--bg-light);\\n          border-top: 1px solid var(--border-color);\\n        }\\n        .detail-section {\\n          margin-bottom: 1rem;\\n        }\\n        .detail-section:last-child {\\n          margin-bottom: 0;\\n        }\\n        .detail-section h4 {\\n          font-size: 0.85rem;\\n          font-weight: 600;\\n          color: var(--text-secondary);\\n          margin-bottom: 0.375rem;\\n        }\\n        .detail-section p {\\n          font-size: 0.9rem;\\n        }\\n        .detail-section ul {\\n          list-style: disc;\\n          margin-left: 1.25rem;\\n          font-size: 0.9rem;\\n        }\\n        .detail-section li {\\n          margin-bottom: 0.25rem;\\n        }\\n        .empty-state {\\n          text-align: center;\\n          padding: 3rem;\\n        }\\n        .empty-icon {\\n          font-size: 3rem;\\n          color: var(--text-muted);\\n          margin-bottom: 1rem;\\n        }\\n      \"})]});};export default PatientHistory;","map":{"version":3,"names":["React","useState","useEffect","Layout","patientAPI","FiFileText","FiCalendar","FiUser","FiChevronDown","FiChevronUp","jsx","_jsx","jsxs","_jsxs","PatientHistory","history","setHistory","loading","setLoading","expandedId","setExpandedId","fetchHistory","response","getMedicalHistory","data","error","console","formatDate","date","Date","toLocaleDateString","year","month","day","toggleExpand","id","appName","role","children","className","length","map","record","_record$medications","onClick","_id","visitDate","diagnosis","doctorName","treatmentPlan","medications","med","i","notes"],"sources":["E:/ECU-Materials/Senior - 2/Graduation Project/semester 2 isa/software reham- rahma/v1 soft app/EXIR/frontend/src/pages/patient/PatientHistory.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../../components/common/Layout';\r\nimport { patientAPI } from '../../services/api';\r\nimport { FiFileText, FiCalendar, FiUser, FiChevronDown, FiChevronUp } from 'react-icons/fi';\r\n\r\nconst PatientHistory = () => {\r\n  const [history, setHistory] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [expandedId, setExpandedId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchHistory();\r\n  }, []);\r\n\r\n  const fetchHistory = async () => {\r\n    try {\r\n      const response = await patientAPI.getMedicalHistory();\r\n      setHistory(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch history:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Date(date).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  const toggleExpand = (id) => {\r\n    setExpandedId(expandedId === id ? null : id);\r\n  };\r\n\r\n  return (\r\n    <Layout appName=\"Patient View\" role=\"patient\">\r\n      <div className=\"page-header\">\r\n        <h1>Medical History</h1>\r\n        <p>View your complete medical history across all visits</p>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          {loading ? (\r\n            <p>Loading medical history...</p>\r\n          ) : history.length === 0 ? (\r\n            <div className=\"empty-state\">\r\n              <FiFileText className=\"empty-icon\" />\r\n              <h3>No Medical History</h3>\r\n              <p>Your medical history will appear here after your first visit</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"history-list\">\r\n              {history.map((record) => (\r\n                <div key={record._id} className=\"history-item\">\r\n                  <div\r\n                    className=\"history-header\"\r\n                    onClick={() => toggleExpand(record._id)}\r\n                  >\r\n                    <div className=\"history-date\">\r\n                      <FiCalendar />\r\n                      <span>{formatDate(record.visitDate)}</span>\r\n                    </div>\r\n                    <div className=\"history-summary\">\r\n                      <span className=\"diagnosis\">{record.diagnosis || 'General Checkup'}</span>\r\n                      <span className=\"doctor\">\r\n                        <FiUser /> {record.doctorName || 'Dr. Unknown'}\r\n                      </span>\r\n                    </div>\r\n                    {expandedId === record._id ? <FiChevronUp /> : <FiChevronDown />}\r\n                  </div>\r\n\r\n                  {expandedId === record._id && (\r\n                    <div className=\"history-details\">\r\n                      <div className=\"detail-section\">\r\n                        <h4>Diagnosis</h4>\r\n                        <p>{record.diagnosis || 'N/A'}</p>\r\n                      </div>\r\n                      <div className=\"detail-section\">\r\n                        <h4>Treatment Plan</h4>\r\n                        <p>{record.treatmentPlan || 'N/A'}</p>\r\n                      </div>\r\n                      <div className=\"detail-section\">\r\n                        <h4>Prescribed Medications</h4>\r\n                        <ul>\r\n                          {record.medications?.length > 0 ? (\r\n                            record.medications.map((med, i) => (\r\n                              <li key={i}>{med}</li>\r\n                            ))\r\n                          ) : (\r\n                            <li>No medications prescribed</li>\r\n                          )}\r\n                        </ul>\r\n                      </div>\r\n                      <div className=\"detail-section\">\r\n                        <h4>Notes</h4>\r\n                        <p>{record.notes || 'No additional notes'}</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .history-list {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 1rem;\r\n        }\r\n        .history-item {\r\n          border: 1px solid var(--border-color);\r\n          border-radius: var(--radius-lg);\r\n          overflow: hidden;\r\n        }\r\n        .history-header {\r\n          display: flex;\r\n          align-items: center;\r\n          padding: 1rem 1.25rem;\r\n          cursor: pointer;\r\n          transition: background 0.2s;\r\n        }\r\n        .history-header:hover {\r\n          background: var(--bg-light);\r\n        }\r\n        .history-date {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 0.5rem;\r\n          min-width: 180px;\r\n          color: var(--accent-blue);\r\n          font-weight: 500;\r\n        }\r\n        .history-summary {\r\n          flex: 1;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 0.25rem;\r\n        }\r\n        .diagnosis {\r\n          font-weight: 500;\r\n        }\r\n        .doctor {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 0.375rem;\r\n          font-size: 0.85rem;\r\n          color: var(--text-secondary);\r\n        }\r\n        .history-details {\r\n          padding: 1.25rem;\r\n          background: var(--bg-light);\r\n          border-top: 1px solid var(--border-color);\r\n        }\r\n        .detail-section {\r\n          margin-bottom: 1rem;\r\n        }\r\n        .detail-section:last-child {\r\n          margin-bottom: 0;\r\n        }\r\n        .detail-section h4 {\r\n          font-size: 0.85rem;\r\n          font-weight: 600;\r\n          color: var(--text-secondary);\r\n          margin-bottom: 0.375rem;\r\n        }\r\n        .detail-section p {\r\n          font-size: 0.9rem;\r\n        }\r\n        .detail-section ul {\r\n          list-style: disc;\r\n          margin-left: 1.25rem;\r\n          font-size: 0.9rem;\r\n        }\r\n        .detail-section li {\r\n          margin-bottom: 0.25rem;\r\n        }\r\n        .empty-state {\r\n          text-align: center;\r\n          padding: 3rem;\r\n        }\r\n        .empty-icon {\r\n          font-size: 3rem;\r\n          color: var(--text-muted);\r\n          margin-bottom: 1rem;\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default PatientHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}